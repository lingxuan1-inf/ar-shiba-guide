<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>AR Shiba Guide</title>
    <!-- A-Frame and AR.js -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- A-Frame Extras for handling GLB animations (animation-mixer) -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css" />
</head>

<body style="margin: 0; overflow: hidden;">

    <!-- AR Scene -->
    <!-- VR Mode UI disabled for AR context -->
    <a-scene embedded
        arjs="sourceType: webcam; debugUIEnabled: false; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;"
        vr-mode-ui="enabled: false">

        <!-- Assets Management -->
        <a-assets>
            <a-asset-item id="shiba-model" src="assets/lucky_cat_maneki_neko.glb"></a-asset-item>
        </a-assets>

        <!-- Marker: Using default 'hiro' marker for demo -->
        <!-- In a real museum, this could be a custom pattern or barcode for each exhibit -->
        <a-marker preset="hiro" id="exhibit-marker">

            <!-- Container for the Guide -->
            <a-entity id="guide-container" position="0 0 0" rotation="0 180 0">

                <!-- 3D MODEL FROM ASSETS -->
                <!-- Rotation set to 270 0 180 based on user 180 XZ + 90 X logic -->
                <a-entity id="shiba-model-gltf" gltf-model="#shiba-model" scale="1.0 1.0 1.0" position="0 0 0.5"
                    rotation="270 0 180">
                </a-entity>

                <!-- Speech Bubble Entity -->
                <!-- Shifted significantly higher (2.5) and to the side (1.5) to clear the larger cat -->
                <a-entity position="1.5 2.5 0" scale="0 0 0" id="speech-bubble-3d" rotation="0 0 0">
                    <a-plane width="2" height="1" color="white" opacity="0.95" position="0 0 0"></a-plane>
                    <a-text value="Hello! I'm your guide." color="#333" align="center" width="1.8"
                        position="0 0 0.02"></a-text>
                    <a-triangle vertex-a="0 0 0" vertex-b="-0.1 -0.1 0" vertex-c="0 -0.5 0" color="white"
                        position="-0.5 -0.5 0" rotation="0 0 45"></a-triangle>
                </a-entity>

            </a-entity>

        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <!-- UI Overlay (HTML) -->
    <div id="ui-overlay">
        <header>
            <h1>Museum AR Guide</h1>
        </header>

        <div id="guide-card" class="glass-panel hidden">
            <div class="character-icon">üê±</div>
            <div class="content">
                <h2 id="exhibit-title">Welcome!</h2>
                <p id="exhibit-text">Scan the marker to meet your guide.</p>
                <button id="next-btn" class="primary-btn">Next Info</button>
            </div>
        </div>

        <div id="scan-prompt" class="glass-panel">
            <p>Point camera at the "HIRO" marker</p>
        </div>
    </div>

    <script src="js/exhibits.js"></script>
    <script src="js/app.js"></script>
</body>

</html>